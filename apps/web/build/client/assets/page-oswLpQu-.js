import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as m,o as e,w as f}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{R as y}from"./layout-DOAopD-I.js";import{u as j,A as N}from"./layout-AkPwuKQJ.js";import{u as I}from"./useMutation-CH2wPccM.js";import{C as v}from"./circle-alert-DAoCY1Xv.js";import{C as w}from"./circle-check-big-C1unNmR8.js";import{C as u}from"./crown-GjmdglVx.js";import{U as x}from"./users-BGaJEnan.js";import{S as k}from"./shield-check-nwaqOUzs.js";import{S as C}from"./shield-jhLB3Iu4.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const i={};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,d),{get(s,a){return a in s?s[a]:void 0},has(){return!0}})}function S(){const[i,d]=m.useState(!1),[s,a]=m.useState("admin"),{data:c,loading:b}=j(),p=[{id:"admin",name:"Admin",description:"Tam yetki - tüm içerikleri ve kullanıcıları yönetebilir",icon:u,color:"red"},{id:"editor",name:"Editor",description:"İçerik yöneticisi - tüm içerikleri yönetebilir ve yayınlayabilir",icon:k,color:"blue"},{id:"author",name:"Author",description:"Yazar - kendi içeriklerini oluşturabilir ve düzenleyebilir",icon:C,color:"green"},{id:"viewer",name:"Viewer",description:"Görüntüleyici - sadece içerikleri görüntüleyebilir",icon:x,color:"gray"}],t=I({mutationFn:async n=>{const l=await fetch("/api/admin/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){const o=await l.json();throw new Error(o.error||"Setup failed")}return l.json()},onSuccess:n=>{d(!0),setTimeout(()=>{window.location.href="/admin"},2e3)}}),g=()=>{t.mutate({role_name:s})};return b?e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-9e9a6380",as:"div",children:e.jsxs(r,{className:"text-center",renderId:"render-aec8ab28",as:"div",children:[e.jsx(r,{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto",renderId:"render-56094a95",as:"div"}),e.jsx(r,{className:"mt-4 text-gray-600",renderId:"render-bae6369b",as:"p",children:"Yükleniyor..."})]})}):c?i?e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-9d98fbf1",as:"div",children:e.jsxs(r,{className:"text-center max-w-md mx-auto p-8",renderId:"render-4d77a037",as:"div",children:[e.jsx(w,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx(r,{className:"text-2xl font-bold text-gray-900 mb-2",renderId:"render-e97f2076",as:"h1",children:"Kurulum Tamamlandı!"}),e.jsx(r,{className:"text-gray-600 mb-6",renderId:"render-a15873e9",as:"p",children:"Admin rolünüz başarıyla atandı. Admin paneline yönlendiriliyorsunuz..."}),e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto",renderId:"render-790d528a",as:"div"})]})}):e.jsx(r,{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",renderId:"render-751a585e",as:"div",children:e.jsxs(r,{className:"max-w-2xl mx-auto",renderId:"render-0b100e52",as:"div",children:[e.jsxs(r,{className:"text-center mb-8",renderId:"render-84020dfb",as:"div",children:[e.jsx(u,{size:48,className:"mx-auto text-blue-600 mb-4"}),e.jsx(r,{className:"text-3xl font-bold text-gray-900 mb-2",renderId:"render-f5403cb5",as:"h1",children:"CMS Admin Kurulumu"}),e.jsx(r,{className:"text-gray-600",renderId:"render-04bb4daf",as:"p",children:"Hoş geldiniz! Admin panelini kullanmak için bir rol seçin."})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",renderId:"render-55cb5759",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-4b6ee5cc",as:"h2",children:"Kullanıcı Bilgileri"}),e.jsxs(r,{className:"flex items-center space-x-3",renderId:"render-50b5c9b8",as:"div",children:[e.jsx(r,{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",renderId:"render-b71d4ef3",as:"div",children:e.jsx(x,{size:24,className:"text-blue-600"})}),e.jsxs(r,{renderId:"render-f8319805",as:"div",children:[e.jsx(r,{className:"font-medium text-gray-900",renderId:"render-acc3e3c4",as:"p",children:c.email}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-c5e5f230",as:"p",children:"İlk admin kullanıcısı"})]})]})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-0f387671",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-f23c5822",as:"h2",children:"Rol Seçin"}),e.jsx(r,{className:"space-y-3 mb-6",renderId:"render-dd73d4e8",as:"div",children:p.map(n=>{const l=n.icon,o={red:"border-red-200 bg-red-50 text-red-600",blue:"border-blue-200 bg-blue-50 text-blue-600",green:"border-green-200 bg-green-50 text-green-600",gray:"border-gray-200 bg-gray-50 text-gray-600"};return e.jsxs(r,{className:`
                    block p-4 border-2 rounded-lg cursor-pointer transition-all
                    ${s===n.id?`${o[n.color]} border-opacity-100`:"border-gray-200 hover:border-gray-300"}
                  `,renderId:"render-1ff848db",as:"label",children:[e.jsx(r,{type:"radio",name:"role",value:n.id,checked:s===n.id,onChange:h=>a(h.target.value),className:"sr-only",renderId:"render-de26a388",as:"input"}),e.jsxs(r,{className:"flex items-start space-x-3",renderId:"render-11bd5f0c",as:"div",children:[e.jsx(l,{size:24,className:s===n.id?"":"text-gray-600"}),e.jsxs(r,{renderId:"render-ea9ed1f7",as:"div",children:[e.jsx(r,{className:"font-medium text-gray-900",renderId:"render-f0431365",as:"h3",children:n.name}),e.jsx(r,{className:"text-sm text-gray-600 mt-1",renderId:"render-362c0d08",as:"p",children:n.description})]})]})]},n.id)})}),t.error&&e.jsx(r,{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",renderId:"render-0edff06c",as:"div",children:e.jsx(r,{className:"text-red-600 text-sm",renderId:"render-25e3515a",as:"p",children:t.error.message})}),e.jsx(r,{onClick:g,disabled:t.loading,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 font-medium",renderId:"render-bed9798a",as:"button",children:t.loading?"Kuruluyor...":"Admin Panelini Kur"}),e.jsx(r,{className:"text-xs text-gray-500 text-center mt-4",renderId:"render-038885dd",as:"p",children:"Bu işlem sadece bir kez yapılabilir. Daha sonra roller yönetici tarafından değiştirilebilir."})]})]})}):e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-0d9f5c43",as:"div",children:e.jsxs(r,{className:"text-center max-w-md mx-auto p-8",renderId:"render-69ebbdd6",as:"div",children:[e.jsx(v,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx(r,{className:"text-2xl font-bold text-gray-900 mb-2",renderId:"render-e567acf2",as:"h1",children:"Giriş Gerekli"}),e.jsx(r,{className:"text-gray-600 mb-6",renderId:"render-8482dc8c",as:"p",children:"Admin panelini kurmak için önce giriş yapmanız gerekiyor."}),e.jsx(r,{href:"/account/signin?callbackUrl=/admin/setup",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",renderId:"render-4653897e",as:"a",children:"Giriş Yap"})]})})}if(typeof window<"u"){const i={};globalThis.process??={};const d=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,d),{get(s,a){return a in s?s[a]:void 0},has(){return!0}})}const H=f(function(d){return e.jsx(y,{children:e.jsx(N,{children:e.jsx(S,{...d})})})});export{H as default};
