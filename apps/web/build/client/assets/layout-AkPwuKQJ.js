import{C as n}from"./PolymorphicComponent-9_vSQL7O.js";import{r as d,o as e}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as p}from"./react-CGZJyOp0.js";import{X as x}from"./x-Cg9-vnoo.js";import{c}from"./createLucideIcon-CYD35-38.js";import{F as w}from"./file-text-Dl61NW4K.js";import{C as v}from"./circle-help-BCyQsvte.js";import{U as j}from"./users-BGaJEnan.js";import{M as I}from"./menu-CpMGlG8b.js";if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const N=c("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const k=c("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const T=c("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const C=c("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const O=c("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const A=c("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}const P=c("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}var f={};const g=()=>{const{data:a,status:t}=p(),s=a?.user?.id,[r,o]=d.useState(a?.user??null),l=d.useCallback(async h=>h?.user,[]),i=d.useCallback(()=>{f.NEXT_PUBLIC_CREATE_ENV==="PRODUCTION"&&(s?l(a).then(o):o(null))},[l,s]);return d.useEffect(i,[i]),f.NEXT_PUBLIC_CREATE_ENV!=="PRODUCTION"?{user:r,data:a?.user||null,loading:t==="loading",refetch:i}:{user:r,data:r,loading:t==="loading"||t==="authenticated"&&!r,refetch:i}};if(typeof window<"u"){const a={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},a,t),{get(s,r){return r in s?s[r]:void 0},has(){return!0}})}function L({isOpen:a,onClose:t}){const{data:s}=g(),r=[{name:"Dashboard",href:"/admin",icon:C},{name:"Blog Posts",href:"/admin/content/blog",icon:w},{name:"Pages",href:"/admin/content/pages",icon:N},{name:"FAQ",href:"/admin/content/faq",icon:v},{name:"Media Library",href:"/admin/media",icon:T},{name:"Categories",href:"/admin/categories",icon:k},{name:"Tags",href:"/admin/tags",icon:P},{name:"Users",href:"/admin/users",icon:j},{name:"Settings",href:"/admin/settings",icon:A}],o=i=>{window.location.href=i,t?.()},l=()=>{window.location.href="/account/logout"};return e.jsxs(e.Fragment,{children:[a&&e.jsx(n,{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:t,renderId:"render-e41dbf38",as:"div"}),e.jsxs(n,{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 text-white transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 lg:static lg:inset-0
        ${a?"translate-x-0":"-translate-x-full"}
      `,renderId:"render-a6c6d9c6",as:"div",children:[e.jsxs(n,{className:"flex items-center justify-between h-16 px-6 bg-gray-800",renderId:"render-6aca1567",as:"div",children:[e.jsx(n,{className:"text-xl font-bold",renderId:"render-75ac8d1e",as:"h1",children:"CMS Admin"}),e.jsx(n,{onClick:t,className:"lg:hidden text-gray-400 hover:text-white",renderId:"render-9c3388be",as:"button",children:e.jsx(x,{size:24})})]}),e.jsxs(n,{className:"flex flex-col h-full",renderId:"render-ff65c527",as:"div",children:[e.jsx(n,{className:"flex-1 px-4 py-6 space-y-1",renderId:"render-271deedd",as:"nav",children:r.map(i=>{const h=i.icon;return e.jsxs(n,{onClick:()=>o(i.href),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors",renderId:"render-ae6aa7e5",as:"button",children:[e.jsx(h,{size:20,className:"mr-3"}),i.name]},i.name)})}),e.jsxs(n,{className:"px-4 py-4 border-t border-gray-700",renderId:"render-4b6b0cbd",as:"div",children:[e.jsxs(n,{className:"flex items-center mb-3",renderId:"render-f9f8a45f",as:"div",children:[e.jsx(n,{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-sm font-medium",renderId:"render-ff0f8b28",as:"div",children:s?.email?.[0]?.toUpperCase()||"U"}),e.jsx(n,{className:"ml-3",renderId:"render-72784cda",as:"div",children:e.jsx(n,{className:"text-sm font-medium text-white truncate",renderId:"render-3fabc190",as:"p",children:s?.email||"User"})})]}),e.jsxs(n,{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-300 hover:text-white hover:bg-red-600 transition-colors",renderId:"render-ac6e9ca5",as:"button",children:[e.jsx(O,{size:20,className:"mr-3"}),"Çıkış Yap"]})]})]})]})]})}function U({onMenuClick:a}){return e.jsxs(n,{className:"bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-6 lg:px-8",renderId:"render-b7adc700",as:"header",children:[e.jsxs(n,{className:"flex items-center",renderId:"render-f80d6b2e",as:"div",children:[e.jsx(n,{onClick:a,className:"lg:hidden text-gray-600 hover:text-gray-900",renderId:"render-5cd1a72a",as:"button",children:e.jsx(I,{size:24})}),e.jsx(n,{className:"ml-4 lg:ml-0 text-xl font-semibold text-gray-900",renderId:"render-e5245a83",as:"h1",children:"İçerik Yönetim Sistemi"})]}),e.jsx(n,{className:"text-sm text-gray-600",renderId:"render-ff74b759",as:"div",children:new Date().toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})}function R({children:a}){const[t,s]=d.useState(!1),[r,o]=d.useState(!1),[l,i]=d.useState(!1),{data:h,loading:u}=g();return d.useEffect(()=>{async function b(){if(!u){if(!h){window.location.href="/account/signin?callbackUrl=/admin";return}try{const m=await(await fetch("/api/admin/auth/check")).json();m.authenticated&&m.user.roles.length>0?i(!0):i(!1)}catch{i(!1)}o(!0)}}b()},[h,u]),!r||u?e.jsx(n,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-9009c38a",as:"div",children:e.jsxs(n,{className:"text-center",renderId:"render-e6c847c3",as:"div",children:[e.jsx(n,{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto",renderId:"render-9c9d8497",as:"div"}),e.jsx(n,{className:"mt-4 text-gray-600",renderId:"render-1d3b84f3",as:"p",children:"Yetki kontrol ediliyor..."})]})}):l?e.jsxs(n,{className:"min-h-screen bg-gray-50",renderId:"render-ad1e25aa",as:"div",children:[e.jsx(L,{isOpen:t,onClose:()=>s(!1)}),e.jsxs(n,{className:"lg:pl-64",renderId:"render-7acf49b8",as:"div",children:[e.jsx(U,{onMenuClick:()=>s(!0)}),e.jsx(n,{className:"py-6",renderId:"render-749e5371",as:"main",children:e.jsx(n,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",renderId:"render-e1309bbb",as:"div",children:a})})]})]}):e.jsx(n,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-05ac9386",as:"div",children:e.jsxs(n,{className:"text-center max-w-md mx-auto p-8",renderId:"render-4e32e1ae",as:"div",children:[e.jsx(n,{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",renderId:"render-782eea80",as:"div",children:e.jsx(x,{size:32,className:"text-red-600"})}),e.jsx(n,{className:"text-2xl font-bold text-gray-900 mb-2",renderId:"render-ae8e7fc9",as:"h1",children:"Erişim Reddedildi"}),e.jsx(n,{className:"text-gray-600 mb-6",renderId:"render-2d9b87bf",as:"p",children:"Bu sayfaya erişmek için admin yetkileriniz bulunmuyor. Lütfen sistem yöneticisi ile iletişime geçin."}),e.jsx(n,{onClick:()=>window.location.href="/",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",renderId:"render-fb87d82a",as:"button",children:"Ana Sayfaya Dön"})]})})}export{R as A,N as F,T as I,k as a,g as u};
