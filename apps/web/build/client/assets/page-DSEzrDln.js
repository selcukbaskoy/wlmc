import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as f,o as e,w as I}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{R as N}from"./layout-DOAopD-I.js";import{a as w,A as k}from"./layout-AkPwuKQJ.js";import{u as C,U as z}from"./useUpload-D18CvZdz.js";import{u as j}from"./useQuery-CqtvtKZW.js";import{u as v}from"./useMutation-CH2wPccM.js";import{A as S}from"./arrow-left-Cv6H1si6.js";import{E as _}from"./eye-DY26Yb9t.js";import{T,S as D}from"./tag-CPjndOyy.js";import{G as E}from"./globe-DOF7cSF5.js";import{X as O}from"./x-Cg9-vnoo.js";import"./react-CGZJyOp0.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const s={};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},s,i),{get(t,c){return c in t?t[c]:void 0},has(){return!0}})}function F({value:s,onChange:i,label:t}){const[c,{loading:p}]=C(),[y,b]=f.useState(!1),h=async l=>{try{const o=await c({reactNativeAsset:l});if(o.error){alert("Upload failed: "+o.error);return}i(o.url)}catch{alert("Upload failed")}},g=l=>{l.preventDefault(),b(!1);const o=l.dataTransfer.files;o.length>0&&h(o[0])},x=l=>{l.preventDefault(),b(!0)},n=l=>{l.preventDefault(),b(!1)};return e.jsxs(r,{renderId:"render-9bf52dfe",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-0dc8e9ce",as:"label",children:t}),e.jsx(r,{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${y?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:g,onDragOver:x,onDragLeave:n,renderId:"render-edba0257",as:"div",children:s?e.jsxs(r,{className:"relative",renderId:"render-9656977e",as:"div",children:[e.jsx(r,{src:s,alt:"Preview",className:"max-w-full h-32 object-cover mx-auto rounded",renderId:"render-da613998",as:"img"}),e.jsx(r,{type:"button",onClick:()=>i(""),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",renderId:"render-1284ec86",as:"button",children:e.jsx(O,{size:16})})]}):e.jsxs(r,{renderId:"render-a59b2b77",as:"div",children:[e.jsx(z,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-sm text-gray-600 mb-2",renderId:"render-a828c0b2",as:"p",children:"Dosyayı sürükleyin veya tıklayarak seçin"}),e.jsx(r,{type:"file",accept:"image/*",onChange:l=>{const o=l.target.files?.[0];o&&h(o)},className:"hidden",id:"file-upload",renderId:"render-980a9b35",as:"input"}),e.jsx(r,{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 cursor-pointer",renderId:"render-995b9bff",as:"label",children:p?"Yükleniyor...":"Dosya Seç"})]})})]})}function A(){const[s,i]=f.useState({content_type:"blog_post",title:"",slug:"",body:"",summary:"",cover_image:"",status:"draft",publish_at:"",unpublish_at:"",meta_title:"",meta_description:"",canonical:"",og_image:"",categories:[],tags:[]}),[t,c]=f.useState({}),[p,y]=f.useState(!0),{data:b}=j({queryKey:["admin-categories"],queryFn:async()=>{const a=await fetch("/api/admin/categories");if(!a.ok)throw new Error("Failed to fetch categories");return a.json()}}),{data:h}=j({queryKey:["admin-tags"],queryFn:async()=>{const a=await fetch("/api/admin/tags");if(!a.ok)throw new Error("Failed to fetch tags");return a.json()}}),g=v({mutationFn:async a=>{const d=await fetch("/api/admin/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!d.ok){const u=await d.json();throw new Error(u.error||"Failed to create content")}return d.json()},onSuccess:a=>{window.location.href="/admin/content/blog"},onError:a=>{c({general:a.message})}}),x=v({mutationFn:async a=>{const d=await fetch("/api/admin/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,status:"draft"})});if(!d.ok)throw new Error("Failed to create preview");const u=await d.json(),m=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:u.id})});if(!m.ok)throw new Error("Failed to create preview token");return m.json()},onSuccess:a=>{window.open(a.preview_url,"_blank")}});f.useEffect(()=>{if(p&&s.title){const a=s.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-");i(d=>({...d,slug:a}))}},[s.title,p]);const n=(a,d)=>{i(u=>({...u,[a]:d})),a==="slug"&&y(!1),t[a]&&c(u=>({...u,[a]:null}))},l=a=>{a.preventDefault();const d={};if(s.title||(d.title="Başlık zorunludur"),s.body||(d.body="İçerik zorunludur"),Object.keys(d).length>0){c(d);return}g.mutate(s)},o=()=>{if(!s.title||!s.body){alert("Önizleme için başlık ve içerik zorunludur");return}x.mutate(s)};return e.jsxs(r,{className:"max-w-4xl mx-auto space-y-6",renderId:"render-5919df1d",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-756ef879",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-4",renderId:"render-0e3a6cdf",as:"div",children:[e.jsx(r,{onClick:()=>window.location.href="/admin/content/blog",className:"text-gray-600 hover:text-gray-900",renderId:"render-013c79ea",as:"button",children:e.jsx(S,{size:24})}),e.jsxs(r,{renderId:"render-723352a3",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-63b79d3a",as:"h1",children:"Yeni Blog Yazısı"}),e.jsx(r,{className:"text-gray-600",renderId:"render-811141fe",as:"p",children:"Blog yazısı oluşturun"})]})]}),e.jsx(r,{className:"flex items-center space-x-3",renderId:"render-71d6b6fd",as:"div",children:e.jsxs(r,{type:"button",onClick:o,disabled:x.loading,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",renderId:"render-2e05bf61",as:"button",children:[e.jsx(_,{size:16,className:"mr-2"}),x.loading?"Hazırlanıyor...":"Önizle"]})})]}),e.jsx(r,{onSubmit:l,className:"space-y-6",renderId:"render-83d96aa4",as:"form",children:e.jsxs(r,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",renderId:"render-8095d16c",as:"div",children:[e.jsx(r,{className:"lg:col-span-2 space-y-6",renderId:"render-63f4bd71",as:"div",children:e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-6b463787",as:"div",children:[e.jsxs(r,{className:"mb-6",renderId:"render-fd3e8c5f",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-36a7cd07",as:"label",children:"Başlık *"}),e.jsx(r,{type:"text",value:s.title,onChange:a=>n("title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Blog yazısı başlığını girin",renderId:"render-738056d2",as:"input"}),t.title&&e.jsx(r,{className:"text-red-600 text-sm mt-1",renderId:"render-0aabd14b",as:"p",children:t.title})]}),e.jsxs(r,{className:"mb-6",renderId:"render-2cdf56d8",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-753d1e9f",as:"label",children:"URL Slug"}),e.jsxs(r,{className:"flex",renderId:"render-7c4959f8",as:"div",children:[e.jsx(r,{className:"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-lg",renderId:"render-9b1b2ea4",as:"span",children:"/blog/"}),e.jsx(r,{type:"text",value:s.slug,onChange:a=>n("slug",a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"url-slug",renderId:"render-7de828cc",as:"input"})]})]}),e.jsxs(r,{className:"mb-6",renderId:"render-1979387e",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-b044c2af",as:"label",children:"Özet"}),e.jsx(r,{value:s.summary,onChange:a=>n("summary",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Kısa özet yazın",renderId:"render-20670b08",as:"textarea"})]}),e.jsxs(r,{renderId:"render-7d879f49",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-5dcd9a80",as:"label",children:"İçerik *"}),e.jsx(r,{value:s.body,onChange:a=>n("body",a.target.value),rows:15,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Markdown formatında içeriğinizi yazın...",renderId:"render-7b0ca765",as:"textarea"}),t.body&&e.jsx(r,{className:"text-red-600 text-sm mt-1",renderId:"render-0eca2fe7",as:"p",children:t.body}),e.jsx(r,{className:"text-sm text-gray-500 mt-2",renderId:"render-4c6e5edd",as:"p",children:"Markdown formatı desteklenir. Örnek: **kalın**, *italik*, [link](url)"})]})]})}),e.jsxs(r,{className:"space-y-6",renderId:"render-6a7442eb",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-51319786",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-ca487ad2",as:"h3",children:"Yayın Ayarları"}),e.jsxs(r,{className:"space-y-4",renderId:"render-ab804dc1",as:"div",children:[e.jsxs(r,{renderId:"render-6c5c7010",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-57231f32",as:"label",children:"Durum"}),e.jsxs(r,{value:s.status,onChange:a=>n("status",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-02021884",as:"select",children:[e.jsx(r,{value:"draft",renderId:"render-d707c2a8",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-a0096c0c",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-932cf6d4",as:"option",children:"Yayında"})]})]}),e.jsxs(r,{renderId:"render-e5a02792",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-c15e0bec",as:"label",children:"Yayın Tarihi"}),e.jsx(r,{type:"datetime-local",value:s.publish_at,onChange:a=>n("publish_at",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-416d7ccd",as:"input"})]}),e.jsxs(r,{renderId:"render-37d3b8c1",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-9443bb76",as:"label",children:"Yayından Kaldırma Tarihi"}),e.jsx(r,{type:"datetime-local",value:s.unpublish_at,onChange:a=>n("unpublish_at",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-9783c403",as:"input"})]})]})]}),e.jsx(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-70819735",as:"div",children:e.jsx(F,{label:"Kapak Görseli",value:s.cover_image,onChange:a=>n("cover_image",a)})}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-82598ba5",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-cb040300",as:"h3",children:[e.jsx(w,{size:20,className:"mr-2"}),"Kategoriler"]}),e.jsx(r,{className:"space-y-2 max-h-48 overflow-y-auto",renderId:"render-29690b0b",as:"div",children:b?.map(a=>e.jsxs(r,{className:"flex items-center",renderId:"render-18bcaef7",as:"label",children:[e.jsx(r,{type:"checkbox",checked:s.categories.includes(a.id),onChange:d=>{const u=d.target.checked?[...s.categories,a.id]:s.categories.filter(m=>m!==a.id);n("categories",u)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",renderId:"render-08f34301",as:"input"}),e.jsx(r,{className:"ml-2 text-sm text-gray-700",renderId:"render-c8bea962",as:"span",children:a.name})]},a.id))})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-34603f96",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-9338edb0",as:"h3",children:[e.jsx(T,{size:20,className:"mr-2"}),"Etiketler"]}),e.jsx(r,{className:"space-y-2 max-h-48 overflow-y-auto",renderId:"render-f0038542",as:"div",children:h?.map(a=>e.jsxs(r,{className:"flex items-center",renderId:"render-1e88321d",as:"label",children:[e.jsx(r,{type:"checkbox",checked:s.tags.includes(a.id),onChange:d=>{const u=d.target.checked?[...s.tags,a.id]:s.tags.filter(m=>m!==a.id);n("tags",u)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",renderId:"render-825992d2",as:"input"}),e.jsx(r,{className:"ml-2 text-sm text-gray-700",renderId:"render-a39d86ac",as:"span",children:a.name})]},a.id))})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-95ee78de",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-2e3519dd",as:"h3",children:[e.jsx(E,{size:20,className:"mr-2"}),"SEO Ayarları"]}),e.jsxs(r,{className:"space-y-4",renderId:"render-0e5bfb3c",as:"div",children:[e.jsxs(r,{renderId:"render-7c97c8e4",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-858f8dac",as:"label",children:"Meta Başlık"}),e.jsx(r,{type:"text",value:s.meta_title,onChange:a=>n("meta_title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO başlığı",renderId:"render-abfa0615",as:"input"})]}),e.jsxs(r,{renderId:"render-92236bc6",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-f246a5a2",as:"label",children:"Meta Açıklama"}),e.jsx(r,{value:s.meta_description,onChange:a=>n("meta_description",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO açıklaması",renderId:"render-0ac72026",as:"textarea"})]}),e.jsxs(r,{renderId:"render-25f4fc07",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-44142726",as:"label",children:"Canonical URL"}),e.jsx(r,{type:"url",value:s.canonical,onChange:a=>n("canonical",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/canonical-url",renderId:"render-69e7470b",as:"input"})]}),e.jsxs(r,{renderId:"render-867e2fec",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-c334b076",as:"label",children:"OG Image URL"}),e.jsx(r,{type:"url",value:s.og_image,onChange:a=>n("og_image",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/og-image.jpg",renderId:"render-30859086",as:"input"})]})]})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-7c6d20cf",as:"div",children:[t.general&&e.jsx(r,{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",renderId:"render-fed0faf0",as:"div",children:e.jsx(r,{className:"text-red-600 text-sm",renderId:"render-0d58d446",as:"p",children:t.general})}),e.jsx(r,{className:"space-y-3",renderId:"render-a49ddbb0",as:"div",children:e.jsxs(r,{type:"submit",disabled:g.loading,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",renderId:"render-71aff682",as:"button",children:[e.jsx(D,{size:16,className:"mr-2"}),g.loading?"Kaydediliyor...":"Kaydet"]})})]})]})]})})]})}if(typeof window<"u"){const s={};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},s,i),{get(t,c){return c in t?t[c]:void 0},has(){return!0}})}const ee=I(function(i){return e.jsx(N,{children:e.jsx(k,{children:e.jsx(A,{...i})})})});export{ee as default};
