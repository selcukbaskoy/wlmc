import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as m,o as e,w as I}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as N,R as S}from"./layout-DOAopD-I.js";import{F as k,A as T}from"./layout-AkPwuKQJ.js";import{u as C}from"./useQuery-CqtvtKZW.js";import{u as p}from"./useMutation-CH2wPccM.js";import{P as f}from"./plus-BDiOL90S.js";import{S as P}from"./search-Z1iDdWJa.js";import{S as z}from"./square-pen-C4O8YNb_.js";import{E}from"./eye-DY26Yb9t.js";import{T as D}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(a,i){return i in a?a[i]:void 0},has(){return!0}})}function F({content:d,onEdit:t,onDelete:a,onPreview:i}){const c=n=>{const x={draft:"bg-yellow-100 text-yellow-800",review:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800"},o={draft:"Taslak",review:"İnceleme",published:"Yayında"};return e.jsx(r,{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${x[n]}`,renderId:"render-c5892c0c",as:"span",children:o[n]})};return e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-f6c6d3e6",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-d941d170",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-bc13e441",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-b97cc2de",as:"thead",children:e.jsxs(r,{renderId:"render-ca31e6dd",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-725c571b",as:"th",children:"Başlık"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-fe58a1b1",as:"th",children:"Durum"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-68219b11",as:"th",children:"Yazar"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-bd10d994",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-60aceeb7",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-6201de2c",as:"tbody",children:d?.map(n=>e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-2a90d286",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-d7c755f5",as:"td",children:e.jsxs(r,{renderId:"render-2d4d9436",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-ca9eb4e0",as:"div",children:n.title}),e.jsxs(r,{className:"text-sm text-gray-500",renderId:"render-1cce6a59",as:"div",children:["/",n.slug]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-e8b6a7d0",as:"td",children:c(n.status)}),e.jsx(r,{className:"px-6 py-4",renderId:"render-994f0feb",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-5ab46fa0",as:"div",children:n.created_by_name})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-3de99c86",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-450a4657",as:"div",children:new Date(n.updated_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-a7c149a6",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-986cc643",as:"div",children:[e.jsx(r,{onClick:()=>t(n.id),className:"text-blue-600 hover:text-blue-900",title:"Düzenle",renderId:"render-b9e35f57",as:"button",children:e.jsx(z,{size:16})}),e.jsx(r,{onClick:()=>i(n.id),className:"text-green-600 hover:text-green-900",title:"Önizle",renderId:"render-b996096d",as:"button",children:e.jsx(E,{size:16})}),e.jsx(r,{onClick:()=>a(n.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-135e819a",as:"button",children:e.jsx(D,{size:16})})]})})]},n.id))})]})})})}function _({pagination:d,onPageChange:t}){const{page:a,pages:i,total:c}=d;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-c185ccf4",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-ca450a4b",as:"div",children:["Toplam ",c," sayfa"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-83d01bc5",as:"div",children:[e.jsx(r,{onClick:()=>t(a-1),disabled:a<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-1de01eaf",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-bede0d3c",as:"span",children:["Sayfa ",a," / ",i]}),e.jsx(r,{onClick:()=>t(a+1),disabled:a>=i,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-bd7d7278",as:"button",children:"Sonraki"})]})]})}function $(){const[d,t]=m.useState(""),[a,i]=m.useState(""),[c,n]=m.useState(1),x=N(),{data:o,loading:h,error:u}=C({queryKey:["admin-content","page",c,d,a],queryFn:async()=>{const s=new URLSearchParams({type:"page",page:c.toString(),limit:"20"});d&&s.append("search",d),a&&s.append("status",a);const l=await fetch(`/api/admin/content?${s}`);if(!l.ok)throw new Error("Failed to fetch content");return l.json()}}),g=p({mutationFn:async s=>{const l=await fetch(`/api/admin/content/${s}`,{method:"DELETE"});if(!l.ok)throw new Error("Failed to delete content");return l.json()},onSuccess:()=>{x.invalidateQueries(["admin-content"])}}),b=p({mutationFn:async s=>{const l=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:s})});if(!l.ok)throw new Error("Failed to create preview");return l.json()},onSuccess:s=>{window.open(s.preview_url,"_blank")}}),y=s=>{window.location.href=`/admin/content/pages/edit/${s}`},j=async s=>{confirm("Bu sayfayı silmek istediğinizden emin misiniz?")&&g.mutate(s)},v=s=>{b.mutate(s)},w=s=>{s.preventDefault(),n(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-8daef92d",as:"div",children:[e.jsxs(r,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",renderId:"render-8957d5e8",as:"div",children:[e.jsxs(r,{renderId:"render-24b11c9c",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-527722a3",as:"h1",children:"Sayfalar"}),e.jsx(r,{className:"text-gray-600",renderId:"render-2154d561",as:"p",children:"Statik sayfalarınızı yönetin"})]}),e.jsxs(r,{href:"/admin/content/pages/new",className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",renderId:"render-a54fbfe2",as:"a",children:[e.jsx(f,{size:16,className:"mr-2"}),"Yeni Sayfa"]})]}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-3d7baf00",as:"div",children:e.jsxs(r,{onSubmit:w,className:"flex flex-col sm:flex-row gap-4",renderId:"render-c3fa90b9",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-59355f2c",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-47d64e20",as:"div",children:[e.jsx(P,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Sayfa başlığı veya içerik ara...",value:d,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-4d47c461",as:"input"})]})}),e.jsxs(r,{value:a,onChange:s=>i(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-1387380d",as:"select",children:[e.jsx(r,{value:"",renderId:"render-3eb673ce",as:"option",children:"Tüm Durumlar"}),e.jsx(r,{value:"draft",renderId:"render-c29f6323",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-4a76737c",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-cf7da89a",as:"option",children:"Yayında"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-6eb56a41",as:"button",children:"Ara"})]})}),h?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-9813947e",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-3088c0f0",as:"div"})}):u?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-212965ea",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-5ecae15c",as:"p",children:["Bir hata oluştu: ",u.message]})}):o?.content?.length===0?e.jsxs(r,{className:"text-center py-12",renderId:"render-a1177370",as:"div",children:[e.jsx(k,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-445f761d",as:"h3",children:"Henüz sayfa yok"}),e.jsx(r,{className:"text-gray-600 mb-4",renderId:"render-6c2195d9",as:"p",children:"İlk sayfanızı oluşturarak başlayın"}),e.jsxs(r,{href:"/admin/content/pages/new",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",renderId:"render-96413724",as:"a",children:[e.jsx(f,{size:16,className:"mr-2"}),"Yeni Sayfa"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{content:o?.content||[],onEdit:y,onDelete:j,onPreview:v}),o?.pagination&&e.jsx(_,{pagination:o.pagination,onPageChange:n})]})]})}if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(a,i){return i in a?a[i]:void 0},has(){return!0}})}const ee=I(function(t){return e.jsx(S,{children:e.jsx(T,{children:e.jsx($,{...t})})})});export{ee as default};
