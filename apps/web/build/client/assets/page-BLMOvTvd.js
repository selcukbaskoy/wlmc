import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as p,o as e,w as T}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as S,R as D}from"./layout-DOAopD-I.js";import{I as j,F as z,A as C}from"./layout-AkPwuKQJ.js";import{u as _,U as L}from"./useUpload-D18CvZdz.js";import{u as U}from"./useQuery-CqtvtKZW.js";import{u as E}from"./useMutation-CH2wPccM.js";import{S as M}from"./search-Z1iDdWJa.js";import{G as P}from"./grid-3x3-DRrOq0QU.js";import{L as $}from"./list-CWmqlHh6.js";import{E as h}from"./eye-DY26Yb9t.js";import{c as v}from"./createLucideIcon-CYD35-38.js";import{T as b}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,n){return n in s?s[n]:void 0},has(){return!0}})}const y=v("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,n){return n in s?s[n]:void 0},has(){return!0}})}const A=v("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,n){return n in s?s[n]:void 0},has(){return!0}})}function F({onUploadSuccess:d}){const[t,{loading:s}]=_(),[n,o]=p.useState(!1),x=async i=>{try{const c=await t({reactNativeAsset:i});if(c.error){alert("Upload failed: "+c.error);return}(await fetch("/api/admin/media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c.url,original_filename:i.name,alt_text:""})})).ok&&d?.()}catch(c){console.error("Upload error:",c),alert("Upload failed")}},a=i=>{i.preventDefault(),o(!1),Array.from(i.dataTransfer.files).forEach(x)},m=i=>{i.preventDefault(),o(!0)},f=i=>{i.preventDefault(),o(!1)};return e.jsxs(r,{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${n?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:a,onDragOver:m,onDragLeave:f,renderId:"render-8164e75b",as:"div",children:[e.jsx(L,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-d536656f",as:"p",children:"Dosyaları yükleyin"}),e.jsx(r,{className:"text-sm text-gray-600 mb-4",renderId:"render-2ae70044",as:"p",children:"Dosyaları sürükleyin veya tıklayarak seçin"}),e.jsx(r,{type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx",onChange:i=>{Array.from(i.target.files||[]).forEach(x)},className:"hidden",id:"file-upload-multiple",renderId:"render-be0f3d9b",as:"input"}),e.jsx(r,{htmlFor:"file-upload-multiple",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 cursor-pointer",renderId:"render-51ba67b6",as:"label",children:s?"Yükleniyor...":"Dosya Seç"})]})}function R({media:d,onSelect:t,onDelete:s,viewMode:n="grid"}){const o=a=>a.startsWith("image/")?j:a.startsWith("video/")?A:z,x=a=>{navigator.clipboard.writeText(a),alert("URL kopyalandı!")};return n==="list"?e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-f4de0777",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-a1bf2654",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-7135d353",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-de63ab48",as:"thead",children:e.jsxs(r,{renderId:"render-8614752e",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-fd1ebcb5",as:"th",children:"Dosya"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-fecc3623",as:"th",children:"Tür"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-0a3e6db5",as:"th",children:"Boyut"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-7edc6923",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-2fc7b1ff",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-8238588b",as:"tbody",children:d?.map(a=>{const m=o(a.mime_type);return e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-723add74",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-d15395e4",as:"td",children:e.jsxs(r,{className:"flex items-center",renderId:"render-5d21ae30",as:"div",children:[e.jsx(r,{className:"flex-shrink-0 h-10 w-10",renderId:"render-2696883f",as:"div",children:a.mime_type.startsWith("image/")?e.jsx(r,{src:a.url,alt:a.alt_text,className:"h-10 w-10 object-cover rounded",renderId:"render-0dc4f3d4",as:"img"}):e.jsx(r,{className:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center",renderId:"render-ecf5e2ab",as:"div",children:e.jsx(m,{size:20,className:"text-gray-600"})})}),e.jsxs(r,{className:"ml-4",renderId:"render-1d09d207",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-77a7c77f",as:"div",children:a.original_filename}),e.jsx(r,{className:"text-sm text-gray-500",renderId:"render-db020805",as:"div",children:a.filename})]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-59590862",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-d0fc065b",as:"span",children:a.mime_type})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-11002988",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-4b3bbf02",as:"span",children:a.file_size?`${Math.round(a.file_size/1024)} KB`:"N/A"})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-2ca8deb5",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-abdea8a0",as:"span",children:new Date(a.created_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-34b836d0",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-59d5519e",as:"div",children:[e.jsx(r,{onClick:()=>window.open(a.url,"_blank"),className:"text-blue-600 hover:text-blue-900",title:"Görüntüle",renderId:"render-3d9c8194",as:"button",children:e.jsx(h,{size:16})}),e.jsx(r,{onClick:()=>x(a.url),className:"text-green-600 hover:text-green-900",title:"URL Kopyala",renderId:"render-fcddec2f",as:"button",children:e.jsx(y,{size:16})}),e.jsx(r,{onClick:()=>s(a.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-70138d4f",as:"button",children:e.jsx(b,{size:16})})]})})]},a.id)})})]})})}):e.jsx(r,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",renderId:"render-7ee13058",as:"div",children:d?.map(a=>{const m=o(a.mime_type);return e.jsxs(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",renderId:"render-2650613b",as:"div",children:[e.jsxs(r,{className:"aspect-square bg-gray-100 relative",renderId:"render-4c536d47",as:"div",children:[a.mime_type.startsWith("image/")?e.jsx(r,{src:a.url,alt:a.alt_text,className:"w-full h-full object-cover",renderId:"render-3722eeb9",as:"img"}):e.jsx(r,{className:"w-full h-full flex items-center justify-center",renderId:"render-da91f6c1",as:"div",children:e.jsx(m,{size:48,className:"text-gray-400"})}),e.jsx(r,{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",renderId:"render-4457abbe",as:"div",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-23705f3f",as:"div",children:[e.jsx(r,{onClick:()=>window.open(a.url,"_blank"),className:"p-2 bg-white rounded-full text-gray-700 hover:bg-gray-100",title:"Görüntüle",renderId:"render-70506e19",as:"button",children:e.jsx(h,{size:16})}),e.jsx(r,{onClick:()=>x(a.url),className:"p-2 bg-white rounded-full text-gray-700 hover:bg-gray-100",title:"URL Kopyala",renderId:"render-7918a5f2",as:"button",children:e.jsx(y,{size:16})}),e.jsx(r,{onClick:()=>s(a.id),className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100",title:"Sil",renderId:"render-78cf18c0",as:"button",children:e.jsx(b,{size:16})})]})})]}),e.jsxs(r,{className:"p-3",renderId:"render-8f3f25e0",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate",title:a.original_filename,renderId:"render-de5fc43c",as:"h4",children:a.original_filename}),e.jsx(r,{className:"text-xs text-gray-500 mt-1",renderId:"render-7b753c89",as:"p",children:a.mime_type})]})]},a.id)})})}function O({pagination:d,onPageChange:t}){const{page:s,pages:n,total:o}=d;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-20bfc320",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-54b358ff",as:"div",children:["Toplam ",o," dosya"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-cf1507db",as:"div",children:[e.jsx(r,{onClick:()=>t(s-1),disabled:s<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-03c6afa2",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-4f27bbde",as:"span",children:["Sayfa ",s," / ",n]}),e.jsx(r,{onClick:()=>t(s+1),disabled:s>=n,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-dbf2a89f",as:"button",children:"Sonraki"})]})]})}function V(){const[d,t]=p.useState(""),[s,n]=p.useState(""),[o,x]=p.useState(1),[a,m]=p.useState("grid"),f=S(),{data:i,loading:c,error:g}=U({queryKey:["admin-media",o,d,s],queryFn:async()=>{const l=new URLSearchParams({page:o.toString(),limit:a==="grid"?"24":"20"});d&&l.append("search",d),s&&l.append("type",s);const u=await fetch(`/api/admin/media?${l}`);if(!u.ok)throw new Error("Failed to fetch media");return u.json()}}),I=E({mutationFn:async l=>{const u=await fetch(`/api/admin/media/${l}`,{method:"DELETE"});if(!u.ok)throw new Error("Failed to delete media");return u.json()},onSuccess:()=>{f.invalidateQueries(["admin-media"])}}),N=async l=>{confirm("Bu dosyayı silmek istediğinizden emin misiniz?")&&I.mutate(l)},w=()=>{f.invalidateQueries(["admin-media"])},k=l=>{l.preventDefault(),x(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-3d81a5f0",as:"div",children:[e.jsxs(r,{renderId:"render-374a4571",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-276b17bc",as:"h1",children:"Medya Kütüphanesi"}),e.jsx(r,{className:"text-gray-600",renderId:"render-fe91f5e7",as:"p",children:"Dosyalarınızı yönetin ve düzenleyin"})]}),e.jsx(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-28d81543",as:"div",children:e.jsx(F,{onUploadSuccess:w})}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-126fea84",as:"div",children:e.jsxs(r,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",renderId:"render-8358248f",as:"div",children:[e.jsxs(r,{onSubmit:k,className:"flex flex-col sm:flex-row gap-4 flex-1",renderId:"render-bf0c13f8",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-e1fee0bd",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-6396aacb",as:"div",children:[e.jsx(M,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Dosya adı veya açıklama ara...",value:d,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-6f0ee044",as:"input"})]})}),e.jsxs(r,{value:s,onChange:l=>n(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-5009d54c",as:"select",children:[e.jsx(r,{value:"",renderId:"render-ab622f3a",as:"option",children:"Tüm Dosya Türleri"}),e.jsx(r,{value:"image",renderId:"render-c14798f1",as:"option",children:"Resimler"}),e.jsx(r,{value:"video",renderId:"render-f598c858",as:"option",children:"Videolar"}),e.jsx(r,{value:"audio",renderId:"render-b3196f3b",as:"option",children:"Ses Dosyaları"}),e.jsx(r,{value:"application",renderId:"render-7a46eb94",as:"option",children:"Dökümanlar"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-fc6773d6",as:"button",children:"Ara"})]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-a3939f97",as:"div",children:[e.jsx(r,{onClick:()=>m("grid"),className:`p-2 rounded-lg ${a==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Izgara görünümü",renderId:"render-40785293",as:"button",children:e.jsx(P,{size:20})}),e.jsx(r,{onClick:()=>m("list"),className:`p-2 rounded-lg ${a==="list"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Liste görünümü",renderId:"render-2a20b452",as:"button",children:e.jsx($,{size:20})})]})]})}),c?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-23abf497",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-9dc69295",as:"div"})}):g?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-49dc083f",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-932b1967",as:"p",children:["Bir hata oluştu: ",g.message]})}):i?.media?.length===0?e.jsxs(r,{className:"text-center py-12",renderId:"render-c5248145",as:"div",children:[e.jsx(j,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-68d446f5",as:"h3",children:"Henüz dosya yok"}),e.jsx(r,{className:"text-gray-600",renderId:"render-5197e86b",as:"p",children:"İlk dosyanızı yükleyerek başlayın"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{media:i?.media||[],onDelete:N,viewMode:a}),i?.pagination&&e.jsx(O,{pagination:i.pagination,onPageChange:x})]})]})}if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,n){return n in s?s[n]:void 0},has(){return!0}})}const le=T(function(t){return e.jsx(D,{children:e.jsx(C,{children:e.jsx(V,{...t})})})});export{le as default};
