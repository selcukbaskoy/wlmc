import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as u,o as e,w}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as I,R as N}from"./layout-DOAopD-I.js";import{A as k}from"./layout-AkPwuKQJ.js";import{u as S}from"./useQuery-CqtvtKZW.js";import{u as p}from"./useMutation-CH2wPccM.js";import{P as T}from"./plus-BDiOL90S.js";import{S as z}from"./search-Z1iDdWJa.js";import{S as C}from"./square-pen-C4O8YNb_.js";import{E as P}from"./eye-DY26Yb9t.js";import{T as E}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(n,i){return i in n?n[i]:void 0},has(){return!0}})}function B({content:d,onEdit:t,onDelete:n,onPreview:i}){const l=a=>{const x={draft:"bg-yellow-100 text-yellow-800",review:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800"},c={draft:"Taslak",review:"İnceleme",published:"Yayında"};return e.jsx(r,{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${x[a]}`,renderId:"render-8f111da8",as:"span",children:c[a]})};return e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-56ccd0bc",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-afbffb4a",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-a0055d9d",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-53f2cf80",as:"thead",children:e.jsxs(r,{renderId:"render-90cc44b2",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-6bb95625",as:"th",children:"Başlık"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-d5e66157",as:"th",children:"Durum"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-b9070371",as:"th",children:"Yazar"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-d52785cf",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-d54bc6c6",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-0fff21ac",as:"tbody",children:d?.map(a=>e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-8463c56d",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-2fa15491",as:"td",children:e.jsxs(r,{renderId:"render-cc5fcfcc",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-133c41a4",as:"div",children:a.title}),e.jsxs(r,{className:"text-sm text-gray-500",renderId:"render-b999bd9e",as:"div",children:["/",a.slug]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-6182c95c",as:"td",children:l(a.status)}),e.jsx(r,{className:"px-6 py-4",renderId:"render-770a5ee4",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-d36b0f2c",as:"div",children:a.created_by_name})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-d92159b9",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-0a006b04",as:"div",children:new Date(a.updated_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-f94bb641",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-e2c9fd6e",as:"div",children:[e.jsx(r,{onClick:()=>t(a.id),className:"text-blue-600 hover:text-blue-900",title:"Düzenle",renderId:"render-ef519d0e",as:"button",children:e.jsx(C,{size:16})}),e.jsx(r,{onClick:()=>i(a.id),className:"text-green-600 hover:text-green-900",title:"Önizle",renderId:"render-57d03591",as:"button",children:e.jsx(P,{size:16})}),e.jsx(r,{onClick:()=>n(a.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-bcbe079a",as:"button",children:e.jsx(E,{size:16})})]})})]},a.id))})]})})})}function D({pagination:d,onPageChange:t}){const{page:n,pages:i,total:l}=d;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-b0c85200",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-78a6e580",as:"div",children:["Toplam ",l," kayıt"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-136fb699",as:"div",children:[e.jsx(r,{onClick:()=>t(n-1),disabled:n<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-450d349b",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-9ce5e7bd",as:"span",children:["Sayfa ",n," / ",i]}),e.jsx(r,{onClick:()=>t(n+1),disabled:n>=i,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-5f481f0f",as:"button",children:"Sonraki"})]})]})}function _(){const[d,t]=u.useState(""),[n,i]=u.useState(""),[l,a]=u.useState(1),x=I(),{data:c,loading:f,error:m}=S({queryKey:["admin-content","blog_post",l,d,n],queryFn:async()=>{const s=new URLSearchParams({type:"blog_post",page:l.toString(),limit:"20"});d&&s.append("search",d),n&&s.append("status",n);const o=await fetch(`/api/admin/content?${s}`);if(!o.ok)throw new Error("Failed to fetch content");return o.json()}}),b=p({mutationFn:async s=>{const o=await fetch(`/api/admin/content/${s}`,{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete content");return o.json()},onSuccess:()=>{x.invalidateQueries(["admin-content"])}}),h=p({mutationFn:async s=>{const o=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:s})});if(!o.ok)throw new Error("Failed to create preview");return o.json()},onSuccess:s=>{window.open(s.preview_url,"_blank")}}),g=s=>{window.location.href=`/admin/content/blog/edit/${s}`},y=async s=>{confirm("Bu blog yazısını silmek istediğinizden emin misiniz?")&&b.mutate(s)},j=s=>{h.mutate(s)},v=s=>{s.preventDefault(),a(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-30cc251b",as:"div",children:[e.jsxs(r,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",renderId:"render-b07b758b",as:"div",children:[e.jsxs(r,{renderId:"render-c7f83c28",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-fa6ea49c",as:"h1",children:"Blog Yazıları"}),e.jsx(r,{className:"text-gray-600",renderId:"render-1313818c",as:"p",children:"Blog yazılarınızı yönetin"})]}),e.jsxs(r,{href:"/admin/content/blog/new",className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",renderId:"render-3deff53f",as:"a",children:[e.jsx(T,{size:16,className:"mr-2"}),"Yeni Blog Yazısı"]})]}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-c4ccef8e",as:"div",children:e.jsxs(r,{onSubmit:v,className:"flex flex-col sm:flex-row gap-4",renderId:"render-5f7524e2",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-aa471566",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-aa4b1c9f",as:"div",children:[e.jsx(z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Başlık, içerik veya özet ara...",value:d,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-811f8d50",as:"input"})]})}),e.jsxs(r,{value:n,onChange:s=>i(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-f6f49434",as:"select",children:[e.jsx(r,{value:"",renderId:"render-b99c8a70",as:"option",children:"Tüm Durumlar"}),e.jsx(r,{value:"draft",renderId:"render-559b6b12",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-c3010e74",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-f5cbd516",as:"option",children:"Yayında"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-b77d7e25",as:"button",children:"Ara"})]})}),f?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-07e8fb7b",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-a8eaffdf",as:"div"})}):m?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-0029be77",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-1773c6d1",as:"p",children:["Bir hata oluştu: ",m.message]})}):e.jsxs(e.Fragment,{children:[e.jsx(B,{content:c?.content||[],onEdit:g,onDelete:y,onPreview:j}),c?.pagination&&e.jsx(D,{pagination:c.pagination,onPageChange:a})]})]})}if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(n,i){return i in n?n[i]:void 0},has(){return!0}})}const Z=w(function(t){return e.jsx(N,{children:e.jsx(k,{children:e.jsx(_,{...t})})})});export{Z as default};
