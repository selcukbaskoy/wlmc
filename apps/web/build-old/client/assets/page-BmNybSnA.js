import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as u,o as e,w}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as I,R as N}from"./layout-CWBhClkj.js";import{A as k}from"./layout-CHOcBlHj.js";import{u as S}from"./useQuery-hlGAr2h6.js";import{u as p}from"./useMutation-CJHwtqFu.js";import{P as T}from"./plus-BDiOL90S.js";import{S as z}from"./search-Z1iDdWJa.js";import{S as C}from"./square-pen-C4O8YNb_.js";import{E as P}from"./eye-DY26Yb9t.js";import{T as E}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(n,i){return i in n?n[i]:void 0},has(){return!0}})}function B({content:d,onEdit:t,onDelete:n,onPreview:i}){const l=a=>{const x={draft:"bg-yellow-100 text-yellow-800",review:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800"},c={draft:"Taslak",review:"İnceleme",published:"Yayında"};return e.jsx(r,{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${x[a]}`,renderId:"render-447ca66b",as:"span",children:c[a]})};return e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-0f91aa61",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-66c2d212",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-af90aa30",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-98a4fdfd",as:"thead",children:e.jsxs(r,{renderId:"render-5a0d8598",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-0d7b3e1a",as:"th",children:"Başlık"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-71a926c7",as:"th",children:"Durum"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-8d096da4",as:"th",children:"Yazar"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-c6137fdb",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-53690224",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-7736805d",as:"tbody",children:d?.map(a=>e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-a4c02f7f",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-48659370",as:"td",children:e.jsxs(r,{renderId:"render-6847482d",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-04373a88",as:"div",children:a.title}),e.jsxs(r,{className:"text-sm text-gray-500",renderId:"render-b71acb79",as:"div",children:["/",a.slug]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-d4fa031d",as:"td",children:l(a.status)}),e.jsx(r,{className:"px-6 py-4",renderId:"render-2ca4d4f6",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-818f9c1b",as:"div",children:a.created_by_name})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-f5909a73",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-3eb5351b",as:"div",children:new Date(a.updated_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-e5cc3e4f",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-1410d31e",as:"div",children:[e.jsx(r,{onClick:()=>t(a.id),className:"text-blue-600 hover:text-blue-900",title:"Düzenle",renderId:"render-398b262a",as:"button",children:e.jsx(C,{size:16})}),e.jsx(r,{onClick:()=>i(a.id),className:"text-green-600 hover:text-green-900",title:"Önizle",renderId:"render-0b683c1f",as:"button",children:e.jsx(P,{size:16})}),e.jsx(r,{onClick:()=>n(a.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-cf2861c9",as:"button",children:e.jsx(E,{size:16})})]})})]},a.id))})]})})})}function D({pagination:d,onPageChange:t}){const{page:n,pages:i,total:l}=d;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-8a7b907e",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-7cff4fe5",as:"div",children:["Toplam ",l," kayıt"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-eb9083c7",as:"div",children:[e.jsx(r,{onClick:()=>t(n-1),disabled:n<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-5d1deace",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-7ec8a2ba",as:"span",children:["Sayfa ",n," / ",i]}),e.jsx(r,{onClick:()=>t(n+1),disabled:n>=i,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-222b32ca",as:"button",children:"Sonraki"})]})]})}function _(){const[d,t]=u.useState(""),[n,i]=u.useState(""),[l,a]=u.useState(1),x=I(),{data:c,loading:f,error:m}=S({queryKey:["admin-content","blog_post",l,d,n],queryFn:async()=>{const s=new URLSearchParams({type:"blog_post",page:l.toString(),limit:"20"});d&&s.append("search",d),n&&s.append("status",n);const o=await fetch(`/api/admin/content?${s}`);if(!o.ok)throw new Error("Failed to fetch content");return o.json()}}),b=p({mutationFn:async s=>{const o=await fetch(`/api/admin/content/${s}`,{method:"DELETE"});if(!o.ok)throw new Error("Failed to delete content");return o.json()},onSuccess:()=>{x.invalidateQueries(["admin-content"])}}),h=p({mutationFn:async s=>{const o=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:s})});if(!o.ok)throw new Error("Failed to create preview");return o.json()},onSuccess:s=>{window.open(s.preview_url,"_blank")}}),g=s=>{window.location.href=`/admin/content/blog/edit/${s}`},y=async s=>{confirm("Bu blog yazısını silmek istediğinizden emin misiniz?")&&b.mutate(s)},j=s=>{h.mutate(s)},v=s=>{s.preventDefault(),a(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-9dd22a44",as:"div",children:[e.jsxs(r,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",renderId:"render-3f06dc37",as:"div",children:[e.jsxs(r,{renderId:"render-e7aaeb9e",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-5ca0f285",as:"h1",children:"Blog Yazıları"}),e.jsx(r,{className:"text-gray-600",renderId:"render-0c9170f2",as:"p",children:"Blog yazılarınızı yönetin"})]}),e.jsxs(r,{href:"/admin/content/blog/new",className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",renderId:"render-27b43784",as:"a",children:[e.jsx(T,{size:16,className:"mr-2"}),"Yeni Blog Yazısı"]})]}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-635cf2ae",as:"div",children:e.jsxs(r,{onSubmit:v,className:"flex flex-col sm:flex-row gap-4",renderId:"render-40048aad",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-a24059ab",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-2163d7ef",as:"div",children:[e.jsx(z,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Başlık, içerik veya özet ara...",value:d,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-0b216982",as:"input"})]})}),e.jsxs(r,{value:n,onChange:s=>i(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-dc56c9af",as:"select",children:[e.jsx(r,{value:"",renderId:"render-c246430d",as:"option",children:"Tüm Durumlar"}),e.jsx(r,{value:"draft",renderId:"render-c6aba9e0",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-bebf01be",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-ed8c746f",as:"option",children:"Yayında"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-e799708b",as:"button",children:"Ara"})]})}),f?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-95cd620d",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-03d4edfc",as:"div"})}):m?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-7ec57443",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-e67a06ec",as:"p",children:["Bir hata oluştu: ",m.message]})}):e.jsxs(e.Fragment,{children:[e.jsx(B,{content:c?.content||[],onEdit:g,onDelete:y,onPreview:j}),c?.pagination&&e.jsx(D,{pagination:c.pagination,onPageChange:a})]})]})}if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(n,i){return i in n?n[i]:void 0},has(){return!0}})}const Z=w(function(t){return e.jsx(N,{children:e.jsx(k,{children:e.jsx(_,{...t})})})});export{Z as default};
