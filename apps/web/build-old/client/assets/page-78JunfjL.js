import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as f,o as e,w as I}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{R as N}from"./layout-CWBhClkj.js";import{a as w,A as k}from"./layout-CHOcBlHj.js";import{u as C,U as z}from"./useUpload-D18CvZdz.js";import{u as j}from"./useQuery-hlGAr2h6.js";import{u as v}from"./useMutation-CJHwtqFu.js";import{A as S}from"./arrow-left-Cv6H1si6.js";import{E as _}from"./eye-DY26Yb9t.js";import{T,S as D}from"./tag-CPjndOyy.js";import{G as E}from"./globe-DOF7cSF5.js";import{X as O}from"./x-Cg9-vnoo.js";import"./react-CGZJyOp0.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const s={};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},s,i),{get(t,c){return c in t?t[c]:void 0},has(){return!0}})}function F({value:s,onChange:i,label:t}){const[c,{loading:p}]=C(),[y,b]=f.useState(!1),h=async l=>{try{const o=await c({reactNativeAsset:l});if(o.error){alert("Upload failed: "+o.error);return}i(o.url)}catch{alert("Upload failed")}},g=l=>{l.preventDefault(),b(!1);const o=l.dataTransfer.files;o.length>0&&h(o[0])},x=l=>{l.preventDefault(),b(!0)},n=l=>{l.preventDefault(),b(!1)};return e.jsxs(r,{renderId:"render-586185a1",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-9cd75362",as:"label",children:t}),e.jsx(r,{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${y?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:g,onDragOver:x,onDragLeave:n,renderId:"render-d862eb3e",as:"div",children:s?e.jsxs(r,{className:"relative",renderId:"render-9cd50766",as:"div",children:[e.jsx(r,{src:s,alt:"Preview",className:"max-w-full h-32 object-cover mx-auto rounded",renderId:"render-8d7917d1",as:"img"}),e.jsx(r,{type:"button",onClick:()=>i(""),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",renderId:"render-eb86903f",as:"button",children:e.jsx(O,{size:16})})]}):e.jsxs(r,{renderId:"render-ee38f99c",as:"div",children:[e.jsx(z,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-sm text-gray-600 mb-2",renderId:"render-937904ef",as:"p",children:"Dosyayı sürükleyin veya tıklayarak seçin"}),e.jsx(r,{type:"file",accept:"image/*",onChange:l=>{const o=l.target.files?.[0];o&&h(o)},className:"hidden",id:"file-upload",renderId:"render-d87858f4",as:"input"}),e.jsx(r,{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 cursor-pointer",renderId:"render-f2b3d775",as:"label",children:p?"Yükleniyor...":"Dosya Seç"})]})})]})}function A(){const[s,i]=f.useState({content_type:"blog_post",title:"",slug:"",body:"",summary:"",cover_image:"",status:"draft",publish_at:"",unpublish_at:"",meta_title:"",meta_description:"",canonical:"",og_image:"",categories:[],tags:[]}),[t,c]=f.useState({}),[p,y]=f.useState(!0),{data:b}=j({queryKey:["admin-categories"],queryFn:async()=>{const a=await fetch("/api/admin/categories");if(!a.ok)throw new Error("Failed to fetch categories");return a.json()}}),{data:h}=j({queryKey:["admin-tags"],queryFn:async()=>{const a=await fetch("/api/admin/tags");if(!a.ok)throw new Error("Failed to fetch tags");return a.json()}}),g=v({mutationFn:async a=>{const d=await fetch("/api/admin/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!d.ok){const u=await d.json();throw new Error(u.error||"Failed to create content")}return d.json()},onSuccess:a=>{window.location.href="/admin/content/blog"},onError:a=>{c({general:a.message})}}),x=v({mutationFn:async a=>{const d=await fetch("/api/admin/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,status:"draft"})});if(!d.ok)throw new Error("Failed to create preview");const u=await d.json(),m=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:u.id})});if(!m.ok)throw new Error("Failed to create preview token");return m.json()},onSuccess:a=>{window.open(a.preview_url,"_blank")}});f.useEffect(()=>{if(p&&s.title){const a=s.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-");i(d=>({...d,slug:a}))}},[s.title,p]);const n=(a,d)=>{i(u=>({...u,[a]:d})),a==="slug"&&y(!1),t[a]&&c(u=>({...u,[a]:null}))},l=a=>{a.preventDefault();const d={};if(s.title||(d.title="Başlık zorunludur"),s.body||(d.body="İçerik zorunludur"),Object.keys(d).length>0){c(d);return}g.mutate(s)},o=()=>{if(!s.title||!s.body){alert("Önizleme için başlık ve içerik zorunludur");return}x.mutate(s)};return e.jsxs(r,{className:"max-w-4xl mx-auto space-y-6",renderId:"render-5cabbaa5",as:"div",children:[e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-3279e1a9",as:"div",children:[e.jsxs(r,{className:"flex items-center space-x-4",renderId:"render-cd09e56f",as:"div",children:[e.jsx(r,{onClick:()=>window.location.href="/admin/content/blog",className:"text-gray-600 hover:text-gray-900",renderId:"render-ef43d9fb",as:"button",children:e.jsx(S,{size:24})}),e.jsxs(r,{renderId:"render-6a41860f",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-9f417a5e",as:"h1",children:"Yeni Blog Yazısı"}),e.jsx(r,{className:"text-gray-600",renderId:"render-68fdf9b2",as:"p",children:"Blog yazısı oluşturun"})]})]}),e.jsx(r,{className:"flex items-center space-x-3",renderId:"render-791ced97",as:"div",children:e.jsxs(r,{type:"button",onClick:o,disabled:x.loading,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",renderId:"render-602eea3a",as:"button",children:[e.jsx(_,{size:16,className:"mr-2"}),x.loading?"Hazırlanıyor...":"Önizle"]})})]}),e.jsx(r,{onSubmit:l,className:"space-y-6",renderId:"render-cdc82974",as:"form",children:e.jsxs(r,{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",renderId:"render-f6c20116",as:"div",children:[e.jsx(r,{className:"lg:col-span-2 space-y-6",renderId:"render-debd798e",as:"div",children:e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-d018cb56",as:"div",children:[e.jsxs(r,{className:"mb-6",renderId:"render-b8a7304e",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-714ea154",as:"label",children:"Başlık *"}),e.jsx(r,{type:"text",value:s.title,onChange:a=>n("title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Blog yazısı başlığını girin",renderId:"render-3d29ac9d",as:"input"}),t.title&&e.jsx(r,{className:"text-red-600 text-sm mt-1",renderId:"render-0f99bade",as:"p",children:t.title})]}),e.jsxs(r,{className:"mb-6",renderId:"render-b8a77d69",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-0586db5a",as:"label",children:"URL Slug"}),e.jsxs(r,{className:"flex",renderId:"render-ba726f5a",as:"div",children:[e.jsx(r,{className:"inline-flex items-center px-3 py-2 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-lg",renderId:"render-a702febf",as:"span",children:"/blog/"}),e.jsx(r,{type:"text",value:s.slug,onChange:a=>n("slug",a.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"url-slug",renderId:"render-9b9cd630",as:"input"})]})]}),e.jsxs(r,{className:"mb-6",renderId:"render-11793176",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-5417800e",as:"label",children:"Özet"}),e.jsx(r,{value:s.summary,onChange:a=>n("summary",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Kısa özet yazın",renderId:"render-448a25a0",as:"textarea"})]}),e.jsxs(r,{renderId:"render-c910f301",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-a5dc9ca1",as:"label",children:"İçerik *"}),e.jsx(r,{value:s.body,onChange:a=>n("body",a.target.value),rows:15,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Markdown formatında içeriğinizi yazın...",renderId:"render-b6069a1b",as:"textarea"}),t.body&&e.jsx(r,{className:"text-red-600 text-sm mt-1",renderId:"render-929bacd7",as:"p",children:t.body}),e.jsx(r,{className:"text-sm text-gray-500 mt-2",renderId:"render-56417448",as:"p",children:"Markdown formatı desteklenir. Örnek: **kalın**, *italik*, [link](url)"})]})]})}),e.jsxs(r,{className:"space-y-6",renderId:"render-f6990a5f",as:"div",children:[e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-66ae31e9",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-8e3de734",as:"h3",children:"Yayın Ayarları"}),e.jsxs(r,{className:"space-y-4",renderId:"render-a7237698",as:"div",children:[e.jsxs(r,{renderId:"render-3ab112f9",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-a9d16969",as:"label",children:"Durum"}),e.jsxs(r,{value:s.status,onChange:a=>n("status",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-b24e3124",as:"select",children:[e.jsx(r,{value:"draft",renderId:"render-24068156",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-b3189e85",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-7ba04917",as:"option",children:"Yayında"})]})]}),e.jsxs(r,{renderId:"render-582c085c",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-641bb5ee",as:"label",children:"Yayın Tarihi"}),e.jsx(r,{type:"datetime-local",value:s.publish_at,onChange:a=>n("publish_at",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-ec9e7fd9",as:"input"})]}),e.jsxs(r,{renderId:"render-441f129d",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-acfd3246",as:"label",children:"Yayından Kaldırma Tarihi"}),e.jsx(r,{type:"datetime-local",value:s.unpublish_at,onChange:a=>n("unpublish_at",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-3b8e0c32",as:"input"})]})]})]}),e.jsx(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-950e4bfa",as:"div",children:e.jsx(F,{label:"Kapak Görseli",value:s.cover_image,onChange:a=>n("cover_image",a)})}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-a51b16ba",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-1fcc3a91",as:"h3",children:[e.jsx(w,{size:20,className:"mr-2"}),"Kategoriler"]}),e.jsx(r,{className:"space-y-2 max-h-48 overflow-y-auto",renderId:"render-b39979df",as:"div",children:b?.map(a=>e.jsxs(r,{className:"flex items-center",renderId:"render-022319d6",as:"label",children:[e.jsx(r,{type:"checkbox",checked:s.categories.includes(a.id),onChange:d=>{const u=d.target.checked?[...s.categories,a.id]:s.categories.filter(m=>m!==a.id);n("categories",u)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",renderId:"render-455443d6",as:"input"}),e.jsx(r,{className:"ml-2 text-sm text-gray-700",renderId:"render-6b1ac4f4",as:"span",children:a.name})]},a.id))})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-15eb31e7",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-c63191d0",as:"h3",children:[e.jsx(T,{size:20,className:"mr-2"}),"Etiketler"]}),e.jsx(r,{className:"space-y-2 max-h-48 overflow-y-auto",renderId:"render-692cfa42",as:"div",children:h?.map(a=>e.jsxs(r,{className:"flex items-center",renderId:"render-82a445fc",as:"label",children:[e.jsx(r,{type:"checkbox",checked:s.tags.includes(a.id),onChange:d=>{const u=d.target.checked?[...s.tags,a.id]:s.tags.filter(m=>m!==a.id);n("tags",u)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",renderId:"render-b1f409e4",as:"input"}),e.jsx(r,{className:"ml-2 text-sm text-gray-700",renderId:"render-ec20fea9",as:"span",children:a.name})]},a.id))})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-91b23cef",as:"div",children:[e.jsxs(r,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",renderId:"render-325f3cf2",as:"h3",children:[e.jsx(E,{size:20,className:"mr-2"}),"SEO Ayarları"]}),e.jsxs(r,{className:"space-y-4",renderId:"render-e0d0e602",as:"div",children:[e.jsxs(r,{renderId:"render-e7565919",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-ea82eeeb",as:"label",children:"Meta Başlık"}),e.jsx(r,{type:"text",value:s.meta_title,onChange:a=>n("meta_title",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO başlığı",renderId:"render-ec2a1a17",as:"input"})]}),e.jsxs(r,{renderId:"render-739ead52",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-62d67f60",as:"label",children:"Meta Açıklama"}),e.jsx(r,{value:s.meta_description,onChange:a=>n("meta_description",a.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"SEO açıklaması",renderId:"render-b3e2e00d",as:"textarea"})]}),e.jsxs(r,{renderId:"render-0dff059f",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-79dccc20",as:"label",children:"Canonical URL"}),e.jsx(r,{type:"url",value:s.canonical,onChange:a=>n("canonical",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/canonical-url",renderId:"render-bbc8ef9c",as:"input"})]}),e.jsxs(r,{renderId:"render-021678e7",as:"div",children:[e.jsx(r,{className:"block text-sm font-medium text-gray-700 mb-2",renderId:"render-889b47d2",as:"label",children:"OG Image URL"}),e.jsx(r,{type:"url",value:s.og_image,onChange:a=>n("og_image",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com/og-image.jpg",renderId:"render-4f083720",as:"input"})]})]})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-a522a908",as:"div",children:[t.general&&e.jsx(r,{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",renderId:"render-1e9eea2d",as:"div",children:e.jsx(r,{className:"text-red-600 text-sm",renderId:"render-d4b16930",as:"p",children:t.general})}),e.jsx(r,{className:"space-y-3",renderId:"render-af1f91da",as:"div",children:e.jsxs(r,{type:"submit",disabled:g.loading,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",renderId:"render-4aa0892c",as:"button",children:[e.jsx(D,{size:16,className:"mr-2"}),g.loading?"Kaydediliyor...":"Kaydet"]})})]})]})]})})]})}if(typeof window<"u"){const s={};globalThis.process??={};const i=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},s,i),{get(t,c){return c in t?t[c]:void 0},has(){return!0}})}const ee=I(function(i){return e.jsx(N,{children:e.jsx(k,{children:e.jsx(A,{...i})})})});export{ee as default};
