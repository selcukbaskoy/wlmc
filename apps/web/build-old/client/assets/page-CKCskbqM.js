import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as m,o as e,w as f}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{R as y}from"./layout-CWBhClkj.js";import{u as j,A as N}from"./layout-CHOcBlHj.js";import{u as I}from"./useMutation-CJHwtqFu.js";import{C as v}from"./circle-alert-DAoCY1Xv.js";import{C as w}from"./circle-check-big-C1unNmR8.js";import{C as u}from"./crown-GjmdglVx.js";import{U as x}from"./users-BGaJEnan.js";import{S as k}from"./shield-check-nwaqOUzs.js";import{S as C}from"./shield-jhLB3Iu4.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const i={};globalThis.process??={};const a=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,a),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}function S(){const[i,a]=m.useState(!1),[s,d]=m.useState("admin"),{data:c,loading:b}=j(),p=[{id:"admin",name:"Admin",description:"Tam yetki - tüm içerikleri ve kullanıcıları yönetebilir",icon:u,color:"red"},{id:"editor",name:"Editor",description:"İçerik yöneticisi - tüm içerikleri yönetebilir ve yayınlayabilir",icon:k,color:"blue"},{id:"author",name:"Author",description:"Yazar - kendi içeriklerini oluşturabilir ve düzenleyebilir",icon:C,color:"green"},{id:"viewer",name:"Viewer",description:"Görüntüleyici - sadece içerikleri görüntüleyebilir",icon:x,color:"gray"}],t=I({mutationFn:async n=>{const l=await fetch("/api/admin/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){const o=await l.json();throw new Error(o.error||"Setup failed")}return l.json()},onSuccess:n=>{a(!0),setTimeout(()=>{window.location.href="/admin"},2e3)}}),g=()=>{t.mutate({role_name:s})};return b?e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-8511e915",as:"div",children:e.jsxs(r,{className:"text-center",renderId:"render-bf3750f2",as:"div",children:[e.jsx(r,{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto",renderId:"render-0eaf8e71",as:"div"}),e.jsx(r,{className:"mt-4 text-gray-600",renderId:"render-eef45680",as:"p",children:"Yükleniyor..."})]})}):c?i?e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-acf715a5",as:"div",children:e.jsxs(r,{className:"text-center max-w-md mx-auto p-8",renderId:"render-392b40b2",as:"div",children:[e.jsx(w,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx(r,{className:"text-2xl font-bold text-gray-900 mb-2",renderId:"render-1996813a",as:"h1",children:"Kurulum Tamamlandı!"}),e.jsx(r,{className:"text-gray-600 mb-6",renderId:"render-aaa7def1",as:"p",children:"Admin rolünüz başarıyla atandı. Admin paneline yönlendiriliyorsunuz..."}),e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto",renderId:"render-e5bdef1c",as:"div"})]})}):e.jsx(r,{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",renderId:"render-ca68bd04",as:"div",children:e.jsxs(r,{className:"max-w-2xl mx-auto",renderId:"render-75ad9ec9",as:"div",children:[e.jsxs(r,{className:"text-center mb-8",renderId:"render-cb39dc8f",as:"div",children:[e.jsx(u,{size:48,className:"mx-auto text-blue-600 mb-4"}),e.jsx(r,{className:"text-3xl font-bold text-gray-900 mb-2",renderId:"render-446a97c3",as:"h1",children:"CMS Admin Kurulumu"}),e.jsx(r,{className:"text-gray-600",renderId:"render-6c4266c6",as:"p",children:"Hoş geldiniz! Admin panelini kullanmak için bir rol seçin."})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",renderId:"render-94827891",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-4772e195",as:"h2",children:"Kullanıcı Bilgileri"}),e.jsxs(r,{className:"flex items-center space-x-3",renderId:"render-9871d861",as:"div",children:[e.jsx(r,{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",renderId:"render-ccd3be7a",as:"div",children:e.jsx(x,{size:24,className:"text-blue-600"})}),e.jsxs(r,{renderId:"render-988cff1b",as:"div",children:[e.jsx(r,{className:"font-medium text-gray-900",renderId:"render-23a68a06",as:"p",children:c.email}),e.jsx(r,{className:"text-sm text-gray-600",renderId:"render-9c547c82",as:"p",children:"İlk admin kullanıcısı"})]})]})]}),e.jsxs(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-c17c29eb",as:"div",children:[e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-4",renderId:"render-99591afb",as:"h2",children:"Rol Seçin"}),e.jsx(r,{className:"space-y-3 mb-6",renderId:"render-937b0d42",as:"div",children:p.map(n=>{const l=n.icon,o={red:"border-red-200 bg-red-50 text-red-600",blue:"border-blue-200 bg-blue-50 text-blue-600",green:"border-green-200 bg-green-50 text-green-600",gray:"border-gray-200 bg-gray-50 text-gray-600"};return e.jsxs(r,{className:`
                    block p-4 border-2 rounded-lg cursor-pointer transition-all
                    ${s===n.id?`${o[n.color]} border-opacity-100`:"border-gray-200 hover:border-gray-300"}
                  `,renderId:"render-fb7b4018",as:"label",children:[e.jsx(r,{type:"radio",name:"role",value:n.id,checked:s===n.id,onChange:h=>d(h.target.value),className:"sr-only",renderId:"render-3897238a",as:"input"}),e.jsxs(r,{className:"flex items-start space-x-3",renderId:"render-fd4e8415",as:"div",children:[e.jsx(l,{size:24,className:s===n.id?"":"text-gray-600"}),e.jsxs(r,{renderId:"render-63212c40",as:"div",children:[e.jsx(r,{className:"font-medium text-gray-900",renderId:"render-5a885d68",as:"h3",children:n.name}),e.jsx(r,{className:"text-sm text-gray-600 mt-1",renderId:"render-ab385871",as:"p",children:n.description})]})]})]},n.id)})}),t.error&&e.jsx(r,{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",renderId:"render-7dc0782c",as:"div",children:e.jsx(r,{className:"text-red-600 text-sm",renderId:"render-d3a69fac",as:"p",children:t.error.message})}),e.jsx(r,{onClick:g,disabled:t.loading,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 font-medium",renderId:"render-b98da174",as:"button",children:t.loading?"Kuruluyor...":"Admin Panelini Kur"}),e.jsx(r,{className:"text-xs text-gray-500 text-center mt-4",renderId:"render-9894d1be",as:"p",children:"Bu işlem sadece bir kez yapılabilir. Daha sonra roller yönetici tarafından değiştirilebilir."})]})]})}):e.jsx(r,{className:"min-h-screen flex items-center justify-center bg-gray-50",renderId:"render-4abca93a",as:"div",children:e.jsxs(r,{className:"text-center max-w-md mx-auto p-8",renderId:"render-eb3c028c",as:"div",children:[e.jsx(v,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx(r,{className:"text-2xl font-bold text-gray-900 mb-2",renderId:"render-60ff852d",as:"h1",children:"Giriş Gerekli"}),e.jsx(r,{className:"text-gray-600 mb-6",renderId:"render-606d560e",as:"p",children:"Admin panelini kurmak için önce giriş yapmanız gerekiyor."}),e.jsx(r,{href:"/account/signin?callbackUrl=/admin/setup",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",renderId:"render-b7e18be5",as:"a",children:"Giriş Yap"})]})})}if(typeof window<"u"){const i={};globalThis.process??={};const a=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},i,a),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}const H=f(function(a){return e.jsx(y,{children:e.jsx(N,{children:e.jsx(S,{...a})})})});export{H as default};
