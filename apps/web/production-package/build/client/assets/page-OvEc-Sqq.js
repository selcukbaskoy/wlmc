import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as p,o as e,w as T}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as S,R as D}from"./layout-CWBhClkj.js";import{I as v,F as z,A as C}from"./layout-CHOcBlHj.js";import{u as _,U as L}from"./useUpload-D18CvZdz.js";import{u as U}from"./useQuery-hlGAr2h6.js";import{u as P}from"./useMutation-CJHwtqFu.js";import{S as E}from"./search-Z1iDdWJa.js";import{G as M}from"./grid-3x3-DRrOq0QU.js";import{c as f}from"./createLucideIcon-CYD35-38.js";import{E as y}from"./eye-DY26Yb9t.js";import{T as b}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const n={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}const j=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);if(typeof window<"u"){const n={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}const $=f("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);if(typeof window<"u"){const n={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}const A=f("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);if(typeof window<"u"){const n={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}function F({onUploadSuccess:n}){const[t,{loading:s}]=_(),[d,o]=p.useState(!1),x=async i=>{try{const c=await t({reactNativeAsset:i});if(c.error){alert("Upload failed: "+c.error);return}(await fetch("/api/admin/media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:c.url,original_filename:i.name,alt_text:""})})).ok&&n?.()}catch(c){console.error("Upload error:",c),alert("Upload failed")}},a=i=>{i.preventDefault(),o(!1),Array.from(i.dataTransfer.files).forEach(x)},m=i=>{i.preventDefault(),o(!0)},g=i=>{i.preventDefault(),o(!1)};return e.jsxs(r,{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:a,onDragOver:m,onDragLeave:g,renderId:"render-b0213c11",as:"div",children:[e.jsx(L,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-c7562542",as:"p",children:"Dosyaları yükleyin"}),e.jsx(r,{className:"text-sm text-gray-600 mb-4",renderId:"render-bb80e20d",as:"p",children:"Dosyaları sürükleyin veya tıklayarak seçin"}),e.jsx(r,{type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx",onChange:i=>{Array.from(i.target.files||[]).forEach(x)},className:"hidden",id:"file-upload-multiple",renderId:"render-0c35a0e9",as:"input"}),e.jsx(r,{htmlFor:"file-upload-multiple",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 cursor-pointer",renderId:"render-fe5e4fce",as:"label",children:s?"Yükleniyor...":"Dosya Seç"})]})}function O({media:n,onSelect:t,onDelete:s,viewMode:d="grid"}){const o=a=>a.startsWith("image/")?v:a.startsWith("video/")?A:z,x=a=>{navigator.clipboard.writeText(a),alert("URL kopyalandı!")};return d==="list"?e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-216c55df",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-43d4702b",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-fe23f27a",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-df51fede",as:"thead",children:e.jsxs(r,{renderId:"render-30ff09a3",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-7cd7d326",as:"th",children:"Dosya"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-cc022290",as:"th",children:"Tür"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-4cce6858",as:"th",children:"Boyut"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-da617473",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-19fce439",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-44f076f7",as:"tbody",children:n?.map(a=>{const m=o(a.mime_type);return e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-51411f81",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-d7c43fc4",as:"td",children:e.jsxs(r,{className:"flex items-center",renderId:"render-2a29ab2a",as:"div",children:[e.jsx(r,{className:"flex-shrink-0 h-10 w-10",renderId:"render-c3989464",as:"div",children:a.mime_type.startsWith("image/")?e.jsx(r,{src:a.url,alt:a.alt_text,className:"h-10 w-10 object-cover rounded",renderId:"render-0c959db8",as:"img"}):e.jsx(r,{className:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center",renderId:"render-70451da4",as:"div",children:e.jsx(m,{size:20,className:"text-gray-600"})})}),e.jsxs(r,{className:"ml-4",renderId:"render-9bbec719",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-abf1b142",as:"div",children:a.original_filename}),e.jsx(r,{className:"text-sm text-gray-500",renderId:"render-c4918ff1",as:"div",children:a.filename})]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-b7b1bc3b",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-58827cbe",as:"span",children:a.mime_type})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-cfc0fff2",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-70b90401",as:"span",children:a.file_size?`${Math.round(a.file_size/1024)} KB`:"N/A"})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-d874ddfa",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-d05bbdbf",as:"span",children:new Date(a.created_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-9a956d76",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-a97517d9",as:"div",children:[e.jsx(r,{onClick:()=>window.open(a.url,"_blank"),className:"text-blue-600 hover:text-blue-900",title:"Görüntüle",renderId:"render-a6a2ea55",as:"button",children:e.jsx(y,{size:16})}),e.jsx(r,{onClick:()=>x(a.url),className:"text-green-600 hover:text-green-900",title:"URL Kopyala",renderId:"render-c9942b80",as:"button",children:e.jsx(j,{size:16})}),e.jsx(r,{onClick:()=>s(a.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-36f0adfc",as:"button",children:e.jsx(b,{size:16})})]})})]},a.id)})})]})})}):e.jsx(r,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",renderId:"render-474c3ec8",as:"div",children:n?.map(a=>{const m=o(a.mime_type);return e.jsxs(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",renderId:"render-f840aa21",as:"div",children:[e.jsxs(r,{className:"aspect-square bg-gray-100 relative",renderId:"render-84ac08c3",as:"div",children:[a.mime_type.startsWith("image/")?e.jsx(r,{src:a.url,alt:a.alt_text,className:"w-full h-full object-cover",renderId:"render-e974112b",as:"img"}):e.jsx(r,{className:"w-full h-full flex items-center justify-center",renderId:"render-2cdca482",as:"div",children:e.jsx(m,{size:48,className:"text-gray-400"})}),e.jsx(r,{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 hover:opacity-100",renderId:"render-35590cfe",as:"div",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-0357c98d",as:"div",children:[e.jsx(r,{onClick:()=>window.open(a.url,"_blank"),className:"p-2 bg-white rounded-full text-gray-700 hover:bg-gray-100",title:"Görüntüle",renderId:"render-2cc49151",as:"button",children:e.jsx(y,{size:16})}),e.jsx(r,{onClick:()=>x(a.url),className:"p-2 bg-white rounded-full text-gray-700 hover:bg-gray-100",title:"URL Kopyala",renderId:"render-2887aa99",as:"button",children:e.jsx(j,{size:16})}),e.jsx(r,{onClick:()=>s(a.id),className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100",title:"Sil",renderId:"render-58f25a08",as:"button",children:e.jsx(b,{size:16})})]})})]}),e.jsxs(r,{className:"p-3",renderId:"render-bc78cb53",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate",title:a.original_filename,renderId:"render-3b3efa2c",as:"h4",children:a.original_filename}),e.jsx(r,{className:"text-xs text-gray-500 mt-1",renderId:"render-aecb3ca7",as:"p",children:a.mime_type})]})]},a.id)})})}function R({pagination:n,onPageChange:t}){const{page:s,pages:d,total:o}=n;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-6292700e",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-24c2359a",as:"div",children:["Toplam ",o," dosya"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-15790b3d",as:"div",children:[e.jsx(r,{onClick:()=>t(s-1),disabled:s<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-8ab3727b",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-9ac4a7c8",as:"span",children:["Sayfa ",s," / ",d]}),e.jsx(r,{onClick:()=>t(s+1),disabled:s>=d,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-c8050c42",as:"button",children:"Sonraki"})]})]})}function q(){const[n,t]=p.useState(""),[s,d]=p.useState(""),[o,x]=p.useState(1),[a,m]=p.useState("grid"),g=S(),{data:i,loading:c,error:h}=U({queryKey:["admin-media",o,n,s],queryFn:async()=>{const l=new URLSearchParams({page:o.toString(),limit:a==="grid"?"24":"20"});n&&l.append("search",n),s&&l.append("type",s);const u=await fetch(`/api/admin/media?${l}`);if(!u.ok)throw new Error("Failed to fetch media");return u.json()}}),I=P({mutationFn:async l=>{const u=await fetch(`/api/admin/media/${l}`,{method:"DELETE"});if(!u.ok)throw new Error("Failed to delete media");return u.json()},onSuccess:()=>{g.invalidateQueries(["admin-media"])}}),N=async l=>{confirm("Bu dosyayı silmek istediğinizden emin misiniz?")&&I.mutate(l)},w=()=>{g.invalidateQueries(["admin-media"])},k=l=>{l.preventDefault(),x(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-32b3c294",as:"div",children:[e.jsxs(r,{renderId:"render-d6505fed",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-68a4ffee",as:"h1",children:"Medya Kütüphanesi"}),e.jsx(r,{className:"text-gray-600",renderId:"render-1547f150",as:"p",children:"Dosyalarınızı yönetin ve düzenleyin"})]}),e.jsx(r,{className:"bg-white rounded-lg border border-gray-200 p-6",renderId:"render-b1f63564",as:"div",children:e.jsx(F,{onUploadSuccess:w})}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-fd5f2904",as:"div",children:e.jsxs(r,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",renderId:"render-56c75702",as:"div",children:[e.jsxs(r,{onSubmit:k,className:"flex flex-col sm:flex-row gap-4 flex-1",renderId:"render-09ed9dd9",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-0e024022",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-a9df1336",as:"div",children:[e.jsx(E,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Dosya adı veya açıklama ara...",value:n,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-c719bd30",as:"input"})]})}),e.jsxs(r,{value:s,onChange:l=>d(l.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-1c230a41",as:"select",children:[e.jsx(r,{value:"",renderId:"render-6abc9762",as:"option",children:"Tüm Dosya Türleri"}),e.jsx(r,{value:"image",renderId:"render-c49f7c14",as:"option",children:"Resimler"}),e.jsx(r,{value:"video",renderId:"render-74c2de04",as:"option",children:"Videolar"}),e.jsx(r,{value:"audio",renderId:"render-97b8fb96",as:"option",children:"Ses Dosyaları"}),e.jsx(r,{value:"application",renderId:"render-cce11223",as:"option",children:"Dökümanlar"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-994883e0",as:"button",children:"Ara"})]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-7c79c8b6",as:"div",children:[e.jsx(r,{onClick:()=>m("grid"),className:`p-2 rounded-lg ${a==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Izgara görünümü",renderId:"render-2f148608",as:"button",children:e.jsx(M,{size:20})}),e.jsx(r,{onClick:()=>m("list"),className:`p-2 rounded-lg ${a==="list"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Liste görünümü",renderId:"render-1aae8d3e",as:"button",children:e.jsx($,{size:20})})]})]})}),c?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-4e132376",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-4180536f",as:"div"})}):h?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-dbcd2a62",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-a1972c0b",as:"p",children:["Bir hata oluştu: ",h.message]})}):i?.media?.length===0?e.jsxs(r,{className:"text-center py-12",renderId:"render-d2937841",as:"div",children:[e.jsx(v,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-31578b10",as:"h3",children:"Henüz dosya yok"}),e.jsx(r,{className:"text-gray-600",renderId:"render-fb8a7063",as:"p",children:"İlk dosyanızı yükleyerek başlayın"})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{media:i?.media||[],onDelete:N,viewMode:a}),i?.pagination&&e.jsx(R,{pagination:i.pagination,onPageChange:x})]})]})}if(typeof window<"u"){const n={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},n,t),{get(s,d){return d in s?s[d]:void 0},has(){return!0}})}const ie=T(function(t){return e.jsx(D,{children:e.jsx(C,{children:e.jsx(q,{...t})})})});export{ie as default};
