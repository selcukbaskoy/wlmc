import{C as r}from"./PolymorphicComponent-9_vSQL7O.js";import{r as m,o as e,w as I}from"./chunk-PVWAREVJ-D_rE8Vsp.js";import{u as N,R as S}from"./layout-CWBhClkj.js";import{F as k,A as T}from"./layout-CHOcBlHj.js";import{u as C}from"./useQuery-hlGAr2h6.js";import{u as p}from"./useMutation-CJHwtqFu.js";import{P as f}from"./plus-BDiOL90S.js";import{S as P}from"./search-Z1iDdWJa.js";import{S as z}from"./square-pen-C4O8YNb_.js";import{E}from"./eye-DY26Yb9t.js";import{T as D}from"./trash-2-DFlgNUpN.js";import"./react-CGZJyOp0.js";import"./x-Cg9-vnoo.js";import"./createLucideIcon-CYD35-38.js";import"./file-text-Dl61NW4K.js";import"./circle-help-BCyQsvte.js";import"./users-BGaJEnan.js";import"./menu-CpMGlG8b.js";if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}function F({content:d,onEdit:t,onDelete:s,onPreview:i}){const o=n=>{const x={draft:"bg-yellow-100 text-yellow-800",review:"bg-blue-100 text-blue-800",published:"bg-green-100 text-green-800"},c={draft:"Taslak",review:"İnceleme",published:"Yayında"};return e.jsx(r,{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${x[n]}`,renderId:"render-de1301b1",as:"span",children:c[n]})};return e.jsx(r,{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",renderId:"render-ed4aa474",as:"div",children:e.jsx(r,{className:"overflow-x-auto",renderId:"render-9eceb735",as:"div",children:e.jsxs(r,{className:"min-w-full divide-y divide-gray-200",renderId:"render-74b4998a",as:"table",children:[e.jsx(r,{className:"bg-gray-50",renderId:"render-2c65df44",as:"thead",children:e.jsxs(r,{renderId:"render-22a13aa0",as:"tr",children:[e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-6d9bd7df",as:"th",children:"Başlık"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-c76c8e7b",as:"th",children:"Durum"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-b9ddfb9d",as:"th",children:"Yazar"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-919053e9",as:"th",children:"Tarih"}),e.jsx(r,{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",renderId:"render-721167ef",as:"th",children:"İşlemler"})]})}),e.jsx(r,{className:"bg-white divide-y divide-gray-200",renderId:"render-b28b11c4",as:"tbody",children:d?.map(n=>e.jsxs(r,{className:"hover:bg-gray-50",renderId:"render-a2e4aea4",as:"tr",children:[e.jsx(r,{className:"px-6 py-4",renderId:"render-dcae9ed4",as:"td",children:e.jsxs(r,{renderId:"render-21efd805",as:"div",children:[e.jsx(r,{className:"text-sm font-medium text-gray-900 truncate max-w-xs",renderId:"render-5e814b45",as:"div",children:n.title}),e.jsxs(r,{className:"text-sm text-gray-500",renderId:"render-3ce49f63",as:"div",children:["/",n.slug]})]})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-96056821",as:"td",children:o(n.status)}),e.jsx(r,{className:"px-6 py-4",renderId:"render-1a16c51f",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-70b9ce66",as:"div",children:n.created_by_name})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-8a891973",as:"td",children:e.jsx(r,{className:"text-sm text-gray-900",renderId:"render-c6daf679",as:"div",children:new Date(n.updated_at).toLocaleDateString("tr-TR")})}),e.jsx(r,{className:"px-6 py-4",renderId:"render-e1edb455",as:"td",children:e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-f4ad6d6f",as:"div",children:[e.jsx(r,{onClick:()=>t(n.id),className:"text-blue-600 hover:text-blue-900",title:"Düzenle",renderId:"render-4b3828af",as:"button",children:e.jsx(z,{size:16})}),e.jsx(r,{onClick:()=>i(n.id),className:"text-green-600 hover:text-green-900",title:"Önizle",renderId:"render-48e1f1a3",as:"button",children:e.jsx(E,{size:16})}),e.jsx(r,{onClick:()=>s(n.id),className:"text-red-600 hover:text-red-900",title:"Sil",renderId:"render-43952b41",as:"button",children:e.jsx(D,{size:16})})]})})]},n.id))})]})})})}function _({pagination:d,onPageChange:t}){const{page:s,pages:i,total:o}=d;return e.jsxs(r,{className:"flex items-center justify-between",renderId:"render-4adb6541",as:"div",children:[e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-ef49b340",as:"div",children:["Toplam ",o," sayfa"]}),e.jsxs(r,{className:"flex items-center space-x-2",renderId:"render-601de83b",as:"div",children:[e.jsx(r,{onClick:()=>t(s-1),disabled:s<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-e97d16b4",as:"button",children:"Önceki"}),e.jsxs(r,{className:"text-sm text-gray-700",renderId:"render-57ad916c",as:"span",children:["Sayfa ",s," / ",i]}),e.jsx(r,{onClick:()=>t(s+1),disabled:s>=i,className:"px-3 py-1 text-sm border border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",renderId:"render-c1b6394f",as:"button",children:"Sonraki"})]})]})}function $(){const[d,t]=m.useState(""),[s,i]=m.useState(""),[o,n]=m.useState(1),x=N(),{data:c,loading:h,error:u}=C({queryKey:["admin-content","page",o,d,s],queryFn:async()=>{const a=new URLSearchParams({type:"page",page:o.toString(),limit:"20"});d&&a.append("search",d),s&&a.append("status",s);const l=await fetch(`/api/admin/content?${a}`);if(!l.ok)throw new Error("Failed to fetch content");return l.json()}}),b=p({mutationFn:async a=>{const l=await fetch(`/api/admin/content/${a}`,{method:"DELETE"});if(!l.ok)throw new Error("Failed to delete content");return l.json()},onSuccess:()=>{x.invalidateQueries(["admin-content"])}}),g=p({mutationFn:async a=>{const l=await fetch("/api/admin/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content_id:a})});if(!l.ok)throw new Error("Failed to create preview");return l.json()},onSuccess:a=>{window.open(a.preview_url,"_blank")}}),y=a=>{window.location.href=`/admin/content/pages/edit/${a}`},j=async a=>{confirm("Bu sayfayı silmek istediğinizden emin misiniz?")&&b.mutate(a)},v=a=>{g.mutate(a)},w=a=>{a.preventDefault(),n(1)};return e.jsxs(r,{className:"space-y-6",renderId:"render-eaea6836",as:"div",children:[e.jsxs(r,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",renderId:"render-18751aae",as:"div",children:[e.jsxs(r,{renderId:"render-9c16cd82",as:"div",children:[e.jsx(r,{className:"text-2xl font-bold text-gray-900",renderId:"render-3cc020b9",as:"h1",children:"Sayfalar"}),e.jsx(r,{className:"text-gray-600",renderId:"render-da44fd39",as:"p",children:"Statik sayfalarınızı yönetin"})]}),e.jsxs(r,{href:"/admin/content/pages/new",className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",renderId:"render-4317a0b8",as:"a",children:[e.jsx(f,{size:16,className:"mr-2"}),"Yeni Sayfa"]})]}),e.jsx(r,{className:"bg-white p-4 rounded-lg border border-gray-200",renderId:"render-e07e5ede",as:"div",children:e.jsxs(r,{onSubmit:w,className:"flex flex-col sm:flex-row gap-4",renderId:"render-4c5ee6aa",as:"form",children:[e.jsx(r,{className:"flex-1",renderId:"render-68fe940f",as:"div",children:e.jsxs(r,{className:"relative",renderId:"render-d4c6526b",as:"div",children:[e.jsx(P,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(r,{type:"text",placeholder:"Sayfa başlığı veya içerik ara...",value:d,onChange:a=>t(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-3206240a",as:"input"})]})}),e.jsxs(r,{value:s,onChange:a=>i(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",renderId:"render-89d0c8f3",as:"select",children:[e.jsx(r,{value:"",renderId:"render-e9c74263",as:"option",children:"Tüm Durumlar"}),e.jsx(r,{value:"draft",renderId:"render-73051bbe",as:"option",children:"Taslak"}),e.jsx(r,{value:"review",renderId:"render-248cb166",as:"option",children:"İnceleme"}),e.jsx(r,{value:"published",renderId:"render-03b0e5a0",as:"option",children:"Yayında"})]}),e.jsx(r,{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",renderId:"render-cd541fa7",as:"button",children:"Ara"})]})}),h?e.jsx(r,{className:"flex items-center justify-center py-12",renderId:"render-2463888e",as:"div",children:e.jsx(r,{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600",renderId:"render-85c6e344",as:"div"})}):u?e.jsx(r,{className:"bg-red-50 border border-red-200 rounded-lg p-4",renderId:"render-953d4714",as:"div",children:e.jsxs(r,{className:"text-red-600",renderId:"render-fa4e1eca",as:"p",children:["Bir hata oluştu: ",u.message]})}):c?.content?.length===0?e.jsxs(r,{className:"text-center py-12",renderId:"render-123bd370",as:"div",children:[e.jsx(k,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx(r,{className:"text-lg font-medium text-gray-900 mb-2",renderId:"render-19418809",as:"h3",children:"Henüz sayfa yok"}),e.jsx(r,{className:"text-gray-600 mb-4",renderId:"render-69221d8f",as:"p",children:"İlk sayfanızı oluşturarak başlayın"}),e.jsxs(r,{href:"/admin/content/pages/new",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",renderId:"render-53b94884",as:"a",children:[e.jsx(f,{size:16,className:"mr-2"}),"Yeni Sayfa"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{content:c?.content||[],onEdit:y,onDelete:j,onPreview:v}),c?.pagination&&e.jsx(_,{pagination:c.pagination,onPageChange:n})]})]})}if(typeof window<"u"){const d={};globalThis.process??={};const t=globalThis.process.env??{};globalThis.process.env=new Proxy(Object.assign({},d,t),{get(s,i){return i in s?s[i]:void 0},has(){return!0}})}const ee=I(function(t){return e.jsx(S,{children:e.jsx(T,{children:e.jsx($,{...t})})})});export{ee as default};
